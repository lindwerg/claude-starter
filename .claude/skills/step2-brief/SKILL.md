---
name: step2-brief
description: "Шаг 2: Бизнес-бриф. Используй: 'бизнес-анализ', 'требования', 'brief', 'step2'"
allowed-tools: [Read, Write, Edit, Glob, TodoWrite, AskUserQuestion]
---

# Шаг 2: Бизнес-бриф

Интерактивное интервью для понимания проекта.

## Что это?

Анализ бизнес-требований через структурированное интервью. Определяем:
- **ЧТО** строим
- **ДЛЯ КОГО**
- **ЗАЧЕМ**

## Когда использовать?

После `/step1-init`, перед `/step3-prd`.

## Как запустить?

```bash
/step2-brief
```

## Что получим?

Документ `docs/product-brief-{project}-{date}.md` с:
- Краткое описание проекта
- Проблема, которую решаем
- Целевая аудитория
- Ключевые фичи
- Бизнес-цели
- Scope (что входит / не входит)
- Риски и ограничения

---

## MANDATORY INTERVIEW PROCESS

**CRITICAL — ЗАДАЙ ВСЕ ВОПРОСЫ ПОСЛЕДОВАТЕЛЬНО**

Используй AskUserQuestion tool для КАЖДОГО вопроса. НЕ ПРОПУСКАЙ вопросы. НЕ генерируй документ пока не получишь ответы на ВСЕ вопросы.

### Секция 1: Краткое описание (3 вопроса)

**ОБЯЗАТЕЛЬНО задай ЭТИ вопросы:**

1. **Что строим?**
   ```
   Опиши в 1-2 предложениях: что это за продукт/фича/проект?
   ```

2. **Для кого строим?**
   ```
   Кто основные пользователи? Укажи конкретные роли и примерное количество.
   ```

3. **Зачем строим?**
   ```
   Какая главная цель проекта? Что получат пользователи в итоге?
   ```

**После получения ответов проверь качество:**
- Если описание < 15 слов → спроси: "Можешь описать подробнее?"
- Если роли не конкретны → спроси: "Какие именно роли? Сколько пользователей?"
- Если цель абстрактна → спроси: "Какой конкретный результат?"

---

### Секция 2: Проблема (4 вопроса)

**ОБЯЗАТЕЛЬНО задай ЭТИ вопросы:**

1. **Какую проблему решаем?**
   ```
   Опиши конкретную боль или проблему, которую испытывают пользователи.
   ```

2. **Как часто эта проблема возникает?**
   ```
   Ежедневно? Еженедельно? При каких условиях?
   ```

3. **Как пользователи решают это сейчас?**
   ```
   Какие обходные пути используют? Что их не устраивает?
   ```

4. **Что будет, если не решить проблему?**
   ```
   Какой ущерб? Потери времени? Денег? Пользователей?
   ```

**После получения ответов проверь качество:**
- Если проблема абстрактна → спроси: "Приведи конкретный пример"
- Если нет частоты → спроси: "Сколько раз в день/неделю это происходит?"
- Если нет количественных данных → спроси: "Сколько времени/денег теряется?"

---

### Секция 3: Целевая аудитория (3 вопроса)

**ОБЯЗАТЕЛЬНО задай ЭТИ вопросы:**

1. **Кто основные пользователи?**
   ```
   Опиши 2-3 основные роли/сегмента. Примеры: "менеджеры проектов", "студенты", "владельцы магазинов".
   ```

2. **Что они хотят получить?**
   ```
   Какие задачи решают? Какие боли закрывают?
   ```

3. **Сколько их?**
   ```
   Примерный размер аудитории на старте и через 6-12 месяцев.
   ```

**После получения ответов проверь качество:**
- Если роли слишком широкие → спроси: "Можешь уточнить конкретную роль?"
- Если нет задач → спроси: "Какие конкретные задачи они решают?"
- Если нет чисел → спроси: "Хотя бы примерный порядок: десятки, сотни, тысячи?"

---

### Секция 4: Решение (3 вопроса)

**ОБЯЗАТЕЛЬНО задай ЭТИ вопросы:**

1. **Как твой продукт решает проблему?**
   ```
   Опиши основную механику решения в 2-3 предложениях.
   ```

2. **Какие 3-5 ключевых фич?**
   ```
   Перечисли главные фичи, без которых продукт не имеет смысла.
   ```

3. **Чем отличаешься от альтернатив?**
   ```
   Что делает твое решение лучше/быстрее/удобнее существующих?
   ```

**После получения ответов проверь качество:**
- Если решение слишком техническое → спроси: "Как это выглядит с точки зрения пользователя?"
- Если > 5 фич → спроси: "Какие 3 самые важные для MVP?"
- Если нет отличий → спроси: "Что уникального в твоем подходе?"

---

### Секция 5: Бизнес-цели (3 вопроса)

**ОБЯЗАТЕЛЬНО задай ЭТИ вопросы:**

1. **Какие метрики успеха?**
   ```
   Как измеришь, что проект успешен? Примеры: DAU, конверсия, выручка.
   ```

2. **Какие целевые значения?**
   ```
   Конкретные числа для каждой метрики через 3, 6, 12 месяцев.
   ```

3. **Какая бизнес-модель?**
   ```
   Как зарабатываешь? Подписка, комиссия, реклама, бесплатно?
   ```

**После получения ответов проверь качество:**
- Если метрики абстрактны → спроси: "Как конкретно измеришь?"
- Если нет чисел → спроси: "Хотя бы примерные целевые значения?"
- Если нет модели → спроси: "Это MVP для проверки гипотезы или уже есть монетизация?"

---

### Секция 6: Scope (2 вопроса)

**ОБЯЗАТЕЛЬНО задай ЭТИ вопросы:**

1. **Что ВХОДИТ в проект?**
   ```
   Перечисли 5-7 главных фич/функций для первой версии (MVP).
   ```

2. **Что НЕ ВХОДИТ в проект?**
   ```
   Что точно НЕ делаем сейчас? Что откладываем на потом?
   ```

**После получения ответов проверь качество:**
- Если > 10 фич в scope → спроси: "Слишком много для MVP. Какие 5 критичны?"
- Если out-of-scope пустой → спроси: "Точно ничего не откладываем?"

---

### Секция 7: Стейкхолдеры (2 вопроса)

**ОБЯЗАТЕЛЬНО задай ЭТИ вопросы:**

1. **Кто принимает решения?**
   ```
   Кто одобряет дизайн, функционал, запуск? Кто Product Owner?
   ```

2. **Кто еще заинтересован?**
   ```
   Инвесторы, партнеры, внутренние команды? Кого нужно держать в курсе?
   ```

**После получения ответов проверь качество:**
- Если нет decision maker → спроси: "Кто будет одобрять финальную версию?"

---

### Секция 8: Ограничения (3 вопроса)

**ОБЯЗАТЕЛЬНО задай ЭТИ вопросы:**

1. **Бюджет?**
   ```
   Есть ли бюджетные ограничения? Сколько можно потратить на разработку/инфраструктуру?
   ```

2. **Сроки?**
   ```
   Когда нужен MVP? Есть ли жесткие дедлайны (конференция, контракт)?
   ```

3. **Технологии?**
   ```
   Есть ли требования/ограничения по технологиям? Легаси системы для интеграции?
   ```

**После получения ответов проверь качество:**
- Если сроки нереалистичны → спроси: "Это жесткий дедлайн или можно сдвинуть?"
- Если нет ограничений → спроси: "Точно нет технических требований от заказчика?"

---

### Секция 9: Критерии успеха (2 вопроса)

**ОБЯЗАТЕЛЬНО задай ЭТИ вопросы:**

1. **Как поймем, что MVP успешен?**
   ```
   Конкретные критерии: "50 активных пользователей", "10 оплативших подписку", "NPS > 8".
   ```

2. **Что будет после MVP?**
   ```
   Если MVP успешен — что дальше? Масштабирование, новые фичи, pivot?
   ```

**После получения ответов проверь качество:**
- Если критерии абстрактны → спроси: "Какие конкретные числа?"

---

### Секция 10: Timeline (2 вопроса)

**ОБЯЗАТЕЛЬНО задай ЭТИ вопросы:**

1. **Когда нужен запуск?**
   ```
   Конкретная дата или период (например, "конец Q2 2025").
   ```

2. **Есть ли промежуточные вехи?**
   ```
   Нужны ли демо, alpha/beta тесты, презентации инвесторам?
   ```

**После получения ответов проверь качество:**
- Если дата слишком близко → спроси: "Реалистично ли успеть?"

---

### Секция 11: Риски (2 вопроса)

**ОБЯЗАТЕЛЬНО задай ЭТИ вопросы:**

1. **Какие главные риски?**
   ```
   Что может пойти не так? Технические, бизнес, команда?
   ```

2. **Как будем снижать риски?**
   ```
   Что можем сделать заранее чтобы минимизировать риски?
   ```

**После получения ответов проверь качество:**
- Если нет рисков → спроси: "Точно нет рисков? Технические сложности, конкуренты?"

---

## Answer Quality Gates

После КАЖДОГО ответа пользователя проверь качество:

| Проблема ответа | Уточняющий вопрос |
|-----------------|-------------------|
| Ответ < 10 слов | "Можешь описать подробнее?" |
| Упомянуты "пользователи" без ролей | "Какие конкретно роли?" |
| Цель размыта | "Какой конкретный результат?" |
| Нет количественных данных | "Сколько времени/денег теряется?" |
| Абстрактное описание | "Приведи конкретный пример" |
| > 10 фич в scope | "Какие 5 критичны для MVP?" |

**ПРАВИЛО**: Если ответ попадает в таблицу — НЕМЕДЛЕННО задай уточняющий вопрос. НЕ ПЕРЕХОДИ к следующему вопросу.

---

## Context Management

Веди контекст ВСЕХ ответов в памяти:

**После КАЖДОГО ответа пользователя:**

1. **Подтверди получение:**
   ```
   ✅ Записал: [краткое извлечение 5-10 слов]
   Переходим к следующему вопросу...
   ```

2. **Перед финальной генерацией покажи ПОЛНЫЙ summary:**
   ```
   ## Собранная информация

   ### 1. Краткое описание
   - Что: [ответ]
   - Кто: [ответ]
   - Зачем: [ответ]

   ### 2. Проблема
   - Суть: [ответ]
   - Частота: [ответ]
   ...

   Всё верно? Могу генерировать документ.
   ```

**КРИТИЧНО**: НЕ используй Write/Edit ДО финальной генерации. Храни всё в памяти/контексте.

---

## Pre-Generation Checklist

**БЛОКИРУЮЩЕЕ ПРАВИЛО**: НЕ генерируй документ, пока НЕ выполнены все проверки:

- [ ] Все 11 секций опрошены (29 вопросов минимум)
- [ ] Каждая секция содержит минимум 2 ответа
- [ ] Нет ответов короче 10 слов без уточнений
- [ ] Есть конкретные примеры (не абстракции)
- [ ] Есть количественные данные (числа, сроки)
- [ ] Пользователь подтвердил финальный summary

**Если хоть один пункт НЕ выполнен:**
→ Покажи пользователю что не хватает
→ Спроси недостающие вопросы
→ НЕ генерируй документ

**Только когда ВСЕ пункты ✅:**
→ Переходи к секции "Call BMAD Backend" ниже

---

## Call BMAD Backend

После сбора всех 29 ответов, передай их в BMAD систему для генерации документа.

### Шаг 1: Создай YAML файл с ответами

Создай файл `/tmp/step2-answers.yaml` со всеми собранными ответами:

```yaml
# Metadata
collected_at: "{current_timestamp_ISO8601}"
collected_by: "step2-brief"

# Section 1: Краткое описание
executive_summary: "{ответ_на_вопрос_1_2_3_объединённый}"
vision: "{ответ_зачем_строим}"

# Section 2: Проблема
problem_statement: "{ответ_какую_проблему_решаем}"
why_now: "{ответ_как_часто_возникает}"
current_solution: "{ответ_как_решают_сейчас}"

# Section 3: Целевая аудитория
primary_users: "{ответ_кто_основные_пользователи}"
user_personas: "{ответ_описание_персон}"
user_pain_points: "{ответ_что_не_устраивает}"

# Section 4: Решение
proposed_solution: "{ответ_как_решаем}"
key_features:
  - "{ключевая_фича_1}"
  - "{ключевая_фича_2}"
  - "{ключевая_фича_3}"
unique_value_proposition: "{ответ_почему_лучше_альтернатив}"

# Section 5: Бизнес-цели
business_goals:
  - "{бизнес_цель_1}"
  - "{бизнес_цель_2}"
  - "{бизнес_цель_3}"

# Section 6: Метрики успеха
success_metrics:
  - "{метрика_1}"
  - "{метрика_2}"
  - "{метрика_3}"

# Section 7: Scope
in_scope:
  - "{что_входит_1}"
  - "{что_входит_2}"
out_of_scope:
  - "{что_НЕ_входит_1}"
  - "{что_НЕ_входит_2}"

# Section 8: Стейкхолдеры
stakeholders:
  - "{стейкхолдер_1: роль, интерес}"
  - "{стейкхолдер_2: роль, интерес}"

# Section 9: Ограничения
constraints:
  - "{ограничение_1}"
  - "{ограничение_2}"
technical_constraints: "{технические_ограничения}"
compliance_requirements: "{требования_соответствия}"

# Section 10: Assumptions
assumptions:
  - "{предположение_1}"
  - "{предположение_2}"

# Section 11: Риски
risks:
  - "Risk: {риск_1} | Mitigation: {план_смягчения}"
  - "Risk: {риск_2} | Mitigation: {план_смягчения}"
```

**Используй Write tool для создания этого файла.**

### Шаг 2: Вызови variable-bridge.sh

```bash
bash ~/.claude/skills/bmad/bmad-v6/utils/variable-bridge.sh \
  product-brief \
  /tmp/step2-answers.yaml
```

**Что происходит:**
1. variable-bridge.sh загружает YAML
2. Экспортирует все 29 переменных как BMAD_*
3. Устанавливает BMAD_BATCH_MODE=true
4. Вызывает команду /product-brief

**Результат:**
- Команда product-brief использует BMAD_* переменные
- Загружает template из `~/.claude/config/bmad/templates/product-brief.md`
- Подставляет переменные
- Генерирует документ `docs/product-brief-{project}-{date}.md`
- Обновляет workflow status

### Шаг 3: Сообщи пользователю

```
✓ Бизнес-бриф создан!

Документ: docs/product-brief-{project}-{date}.md

Следующий шаг: /step3-prd
```

---

## Процесс интервью

Отвечай на вопросы по секциям:

1. **Краткое описание** — Что строим? Для кого?
2. **Проблема** — Какую проблему решаем?
3. **Аудитория** — Кто пользователи?
4. **Решение** — Как решаем проблему?
5. **Бизнес-цели** — Какие метрики успеха?
6. **Scope** — Что входит / не входит в проект?
7. **Стейкхолдеры** — Кто заинтересован?
8. **Ограничения** — Бюджет, сроки, технологии?
9. **Критерии успеха** — Как поймём, что получилось?
10. **Timeline** — Когда запуск?
11. **Риски** — Что может пойти не так?

## Советы

- Отвечай конкретно, с примерами
- Если не знаешь — скажи, разберёмся вместе
- Лучше меньше фич, но чётче
- Out of scope важнее чем in scope

## Следующий шаг

После бизнес-брифа переходи к PRD:

```
/step3-prd
```
